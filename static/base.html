<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CodeEx AI{% endblock %}</title>
    <link rel="icon" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/icon-192x192.png') }}">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        dark: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e0',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'Fira Code', 'monospace'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Additional styles -->
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e0;
            --text-muted: #94a3b8;
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --border-color: #475569;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            box-sizing: border-box;
        }

        body {
            background: 
                /* Mathematical Graph Grid */
                linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px),
                /* Major Grid Lines */
                linear-gradient(rgba(59, 130, 246, 0.2) 2px, transparent 2px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.2) 2px, transparent 2px),
                /* Mathematical Equations Background */
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.05) 0%, transparent 50%),
                /* Base Gradient */
                linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            background-size: 
                20px 20px,
                20px 20px,
                100px 100px,
                100px 100px,
                800px 800px,
                800px 800px,
                100% 100%;
            background-position:
                0 0,
                0 0,
                0 0,
                0 0,
                0 0,
                0 0,
                0 0;
            color: var(--text-primary);
            font-family: 'Inter', system-ui, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Mathematical Graph Background Elements */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                /* Coordinate System Axes */
                linear-gradient(90deg, transparent 49.5%, rgba(59, 130, 246, 0.3) 50%, transparent 50.5%),
                linear-gradient(0deg, transparent 49.5%, rgba(59, 130, 246, 0.3) 50%, transparent 50.5%);
            background-size: 100% 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
        }

        body::after {
            content: 'âˆ« f(x)dx = F(x) + C    â€¢    âˆ‚f/âˆ‚x = lim[hâ†’0] (f(x+h)-f(x))/h    â€¢    Î£(n=1 to âˆž) 1/nÂ² = Ï€Â²/6    â€¢    e^(iÏ€) + 1 = 0    â€¢    âˆ‡Â²Ï† = âˆ‚Â²Ï†/âˆ‚xÂ² + âˆ‚Â²Ï†/âˆ‚yÂ²';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: rgba(59, 130, 246, 0.1);
            white-space: pre-wrap;
            word-wrap: break-word;
            padding: 20px;
            pointer-events: none;
            z-index: 0;
            animation: math-equations-float 20s linear infinite;
            line-height: 2;
        }

        @keyframes math-equations-float {
            0% { transform: translateY(100vh); }
            100% { transform: translateY(-100vh); }
        }

        .glass-effect {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(71, 85, 105, 0.3);
        }

        .gradient-text {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: none;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-secondary {
            background: rgba(71, 85, 105, 0.5);
            border: 1px solid rgba(71, 85, 105, 0.7);
            color: var(--text-primary);
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn-secondary:hover {
            background: rgba(71, 85, 105, 0.7);
            transform: translateY(-1px);
        }

        .card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .input-field {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            transition: all 0.3s ease;
            width: 100%;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .input-field::placeholder {
            color: var(--text-muted);
        }

        .code-block {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
        }

        .code-inline {
            background: rgba(51, 65, 85, 0.6);
            border-radius: 0.375rem;
            padding: 0.25rem 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: #fbbf24;
        }

        .navbar {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(71, 85, 105, 0.3);
        }

        .sidebar {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(12px);
            border-right: 1px solid rgba(71, 85, 105, 0.3);
        }

        .message-bubble {
            border-radius: 1.5rem;
            padding: 1rem 1.25rem;
            margin: 0.5rem 0;
            max-width: 70%;
            word-wrap: break-word;
        }

        .message-user {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0.5rem;
        }

        .message-assistant {
            background: rgba(30, 41, 59, 0.8);
            color: var(--text-primary);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-bottom-left-radius: 0.5rem;
        }

        .loading-dots {
            display: inline-flex;
            gap: 0.25rem;
        }

        .loading-dot {
            width: 0.5rem;
            height: 0.5rem;
            background: var(--accent-primary);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }

        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: rgba(71, 85, 105, 0.2);
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.5);
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.7);
        }

        @media (max-width: 768px) {
            .card {
                padding: 1rem;
            }
            
            .message-bubble {
                max-width: 85%;
            }
        }

        /* Animation classes */
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        .animate-slide-up {
            animation: slideUp 0.3s ease-out;
        }

        /* Status indicators */
        .status-online {
            color: #10b981;
        }

        .status-offline {
            color: #ef4444;
        }

        .status-warning {
            color: #f59e0b;
        }

        /* Notification styles */
        .notification {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(71, 85, 105, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .notification.success {
            border-left: 4px solid #10b981;
        }

        .notification.error {
            border-left: 4px solid #ef4444;
        }

        .notification.warning {
            border-left: 4px solid #f59e0b;
        }

        .notification.info {
            border-left: 4px solid #3b82f6;
        }

        /* Enhanced Mouse Cursor Animations and Effects */
        * {
            cursor: none;
        }

        .cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 215, 0, 1) 0%, rgba(255, 140, 0, 0.9) 100%);
            pointer-events: none;
            z-index: 9999;
            transition: all 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translate(-50%, -50%);
            box-shadow: 
                0 0 15px rgba(255, 215, 0, 0.6),
                0 0 30px rgba(255, 140, 0, 0.4),
                inset 0 0 8px rgba(255, 255, 255, 0.5);
            animation: cursor-glow 3s infinite ease-in-out;
        }

        .cursor-follower {
            position: fixed;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 215, 0, 0.6);
            pointer-events: none;
            z-index: 9998;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, transparent 70%, rgba(255, 215, 0, 0.15) 100%);
            animation: cursor-orbit 6s linear infinite;
        }

        .cursor-trail {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.7);
            pointer-events: none;
            z-index: 9997;
            transition: all 0.2s ease;
            transform: translate(-50%, -50%);
            opacity: 0;
        }

        .cursor.hover {
            transform: translate(-50%, -50%) scale(2.0);
            background: radial-gradient(circle, rgba(255, 20, 147, 1) 0%, rgba(138, 43, 226, 0.9) 100%);
            box-shadow: 
                0 0 25px rgba(255, 20, 147, 0.7),
                0 0 50px rgba(138, 43, 226, 0.5),
                inset 0 0 12px rgba(255, 255, 255, 0.6);
            animation: cursor-hover-bounce 0.8s infinite ease-in-out;
        }

        .cursor-follower.hover {
            transform: translate(-50%, -50%) scale(1.6);
            border-color: rgba(255, 20, 147, 0.8);
            border-width: 3px;
            background: radial-gradient(circle, transparent 60%, rgba(255, 20, 147, 0.25) 100%);
            animation: cursor-hover-spin 3s linear infinite;
        }

        .cursor.click {
            transform: translate(-50%, -50%) scale(0.6);
            background: radial-gradient(circle, rgba(0, 255, 127, 1) 0%, rgba(32, 178, 170, 0.9) 100%);
            animation: cursor-click-ripple 0.4s ease-out;
        }

        .cursor.text {
            width: 3px;
            height: 22px;
            border-radius: 2px;
            background: linear-gradient(to bottom, rgba(255, 215, 0, 1), rgba(255, 140, 0, 1));
            animation: cursor-text-pulse 1.2s infinite;
        }

        .cursor.loading {
            animation: cursor-loading-rainbow 1.5s linear infinite;
            background: conic-gradient(from 0deg, rgba(255, 0, 0, 0.8), rgba(255, 165, 0, 0.8), rgba(255, 255, 0, 0.8), rgba(0, 255, 0, 0.8), rgba(0, 0, 255, 0.8), rgba(75, 0, 130, 0.8), rgba(238, 130, 238, 0.8), rgba(255, 0, 0, 0.8));
        }

        /* Enhanced Cursor Animations */
        @keyframes cursor-glow {
            0%, 100% {
                box-shadow: 
                    0 0 15px rgba(255, 215, 0, 0.6),
                    0 0 30px rgba(255, 140, 0, 0.4),
                    inset 0 0 8px rgba(255, 255, 255, 0.5);
            }
            50% {
                box-shadow: 
                    0 0 25px rgba(255, 215, 0, 0.8),
                    0 0 50px rgba(255, 140, 0, 0.6),
                    inset 0 0 12px rgba(255, 255, 255, 0.7);
            }
        }

        @keyframes cursor-orbit {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes cursor-hover-bounce {
            0%, 100% { transform: translate(-50%, -50%) scale(2.0); }
            50% { transform: translate(-50%, -50%) scale(2.4); }
        }

        @keyframes cursor-hover-spin {
            0% { transform: translate(-50%, -50%) rotate(0deg) scale(1.6); }
            100% { transform: translate(-50%, -50%) rotate(-360deg) scale(1.6); }
        }

        @keyframes cursor-click-ripple {
            0% { 
                transform: translate(-50%, -50%) scale(0.6);
                box-shadow: 0 0 0 0 rgba(0, 255, 127, 0.7);
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.8);
                box-shadow: 0 0 0 20px rgba(0, 255, 127, 0);
            }
            100% { 
                transform: translate(-50%, -50%) scale(1.0);
                box-shadow: 0 0 0 0 rgba(0, 255, 127, 0);
            }
        }

        @keyframes cursor-text-pulse {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.4; }
        }

        @keyframes cursor-loading-rainbow {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Cursor Particle Effects */
        .cursor-particle {
            position: fixed;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.8);
            pointer-events: none;
            z-index: 9996;
            animation: cursor-particle-fade 1s ease-out forwards;
        }

        @keyframes cursor-particle-fade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translate(var(--random-x, 0), var(--random-y, 0));
            }
        }

        /* Restore hover effects for interactive elements */
        a, button, input, textarea, select, .clickable {
            cursor: pointer !important;
        }

        input[type="text"], input[type="email"], input[type="password"], textarea {
            cursor: text !important;
        }

        /* Floating particles animation */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(59, 130, 246, 0.3);
            border-radius: 50%;
            animation: float 6s infinite linear;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Typing animation */
        .typing-animation {
            overflow: hidden;
            border-right: 2px solid rgba(59, 130, 246, 0.8);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: rgba(59, 130, 246, 0.8); }
        }

        /* Ripple effect */
        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .ripple:active::before {
            width: 300px;
            height: 300px;
        }

        /* Glow effects */
        .glow {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            transition: box-shadow 0.3s ease;
        }

        .glow:hover {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        /* Pulse animation for important elements */
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.4);
            }
            50% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
            100% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.4);
            }
        }

        /* Matrix rain effect */
        .matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.1;
        }

        .matrix-char {
            position: absolute;
            color: #00ff00;
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            animation: matrix-fall 3s linear infinite;
        }

        @keyframes matrix-fall {
            0% {
                transform: translateY(-100px);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0;
            }
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Enhanced button animations */
        .btn-animated {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn-animated::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-animated:hover::before {
            left: 100%;
        }

        /* Text reveal animation */
        .text-reveal {
            overflow: hidden;
        }

        .text-reveal span {
            display: inline-block;
            transform: translateY(100%);
            animation: text-reveal 0.8s ease forwards;
        }

        @keyframes text-reveal {
            to {
                transform: translateY(0);
            }
        }

        /* Stagger animation delays */
        .text-reveal span:nth-child(1) { animation-delay: 0.1s; }
        .text-reveal span:nth-child(2) { animation-delay: 0.2s; }
        .text-reveal span:nth-child(3) { animation-delay: 0.3s; }
        .text-reveal span:nth-child(4) { animation-delay: 0.4s; }
        .text-reveal span:nth-child(5) { animation-delay: 0.5s; }

        /* Additional utility classes for chat interface */
        .text-secondary {
            color: var(--text-secondary);
        }

        .text-muted {
            color: var(--text-muted);
        }

        .border-border-color {
            border-color: var(--border-color);
        }

        .bg-dark-700 {
            background-color: rgba(51, 65, 85, 0.7);
        }

        .bg-dark-800 {
            background-color: rgba(30, 41, 59, 0.8);
        }

        .bg-dark-900 {
            background-color: rgba(15, 23, 42, 0.9);
        }

        .glass-strong {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(71, 85, 105, 0.4);
        }

        .focus-ring:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Chat-specific styles */
        .chat-session {
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .chat-session:hover {
            background: rgba(71, 85, 105, 0.3);
            transform: translateX(4px);
        }

        .chat-session.active {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid var(--accent-primary);
        }

        /* Message bubble enhancements */
        .message-bubble {
            position: relative;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .message-bubble::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
        }

        .message-user::before {
            bottom: 0;
            right: -8px;
            border-left: 8px solid #3b82f6;
            border-bottom: 8px solid transparent;
        }

        .message-assistant::before {
            bottom: 0;
            left: -8px;
            border-right: 8px solid rgba(30, 41, 59, 0.8);
            border-bottom: 8px solid transparent;
        }

        /* Typing indicator animation */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 0;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-primary);
            border-radius: 50%;
            animation: typing-bounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        .typing-dot:nth-child(3) { animation-delay: 0s; }

        @keyframes typing-bounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Enhanced scrollbar for chat */
        .scrollbar-thin {
            scrollbar-width: thin;
            scrollbar-color: rgba(59, 130, 246, 0.5) rgba(71, 85, 105, 0.2);
        }

        /* Chat button styles removed as requested */

        /* Mobile optimizations */
        @media (max-width: 1024px) {
            .sidebar {
                width: 100%;
                max-width: 320px;
            }
        }

        @media (max-width: 640px) {
            .message-bubble {
                max-width: 90%;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 1rem;
                margin: 0.5rem;
            }
        }
    </style>
    
    {% block head %}{% endblock %}
</head>
<body class="dark">
    {% block content %}{% endblock %}
    
    <!-- Custom cursor elements -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>
    
    <!-- Floating particles -->
    <div class="particles" id="particles"></div>
    
    <!-- Matrix rain effect -->
    <div class="matrix-rain" id="matrix-rain"></div>
    
    <!-- Scripts -->
    <script>
        // ðŸš€ Advanced Custom Cursor Animation System
        document.addEventListener('DOMContentLoaded', function() {
            const cursor = document.querySelector('.cursor');
            const follower = document.querySelector('.cursor-follower');
            let mouseX = 0, mouseY = 0;
            let followerX = 0, followerY = 0;
            let cursorTrails = [];
            let isClicking = false;
            
            // Create cursor trail elements
            for (let i = 0; i < 8; i++) {
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                document.body.appendChild(trail);
                cursorTrails.push({
                    element: trail,
                    x: 0,
                    y: 0,
                    opacity: 0
                });
            }
            
            // Update cursor position with advanced effects
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                cursor.style.left = mouseX + 'px';
                cursor.style.top = mouseY + 'px';
                
                // Create particle effect on movement
                if (Math.random() > 0.95) {
                    createCursorParticle(mouseX, mouseY);
                }
                
                // Update cursor trails
                updateCursorTrails();
            });
            
            // Smooth follower animation with easing
            function animateFollower() {
                const ease = 0.12;
                followerX += (mouseX - followerX) * ease;
                followerY += (mouseY - followerY) * ease;
                
                follower.style.left = followerX + 'px';
                follower.style.top = followerY + 'px';
                
                requestAnimationFrame(animateFollower);
            }
            animateFollower();
            
            // Update cursor trails
            function updateCursorTrails() {
                cursorTrails.forEach((trail, index) => {
                    const delay = (index + 1) * 0.05;
                    const targetX = mouseX - (mouseX - trail.x) * (1 - delay);
                    const targetY = mouseY - (mouseY - trail.y) * (1 - delay);
                    
                    trail.x = targetX;
                    trail.y = targetY;
                    trail.opacity = Math.max(0, 1 - (index * 0.15));
                    
                    trail.element.style.left = targetX + 'px';
                    trail.element.style.top = targetY + 'px';
                    trail.element.style.opacity = trail.opacity;
                });
            }
            
            // Create cursor particles
            function createCursorParticle(x, y) {
                const particle = document.createElement('div');
                particle.className = 'cursor-particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                // Random direction for particle
                const randomX = (Math.random() - 0.5) * 100;
                const randomY = (Math.random() - 0.5) * 100;
                particle.style.setProperty('--random-x', randomX + 'px');
                particle.style.setProperty('--random-y', randomY + 'px');
                
                document.body.appendChild(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 1000);
            }
            
            // Enhanced hover effects for different element types
            const hoverElements = document.querySelectorAll('a, button, input, textarea, select, .clickable');
            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.classList.add('hover');
                    follower.classList.add('hover');
                    
                    // Special effects for different elements
                    if (el.tagName === 'BUTTON') {
                        cursor.style.background = 'radial-gradient(circle, rgba(139, 92, 246, 1) 0%, rgba(236, 72, 153, 0.8) 100%)';
                    } else if (el.tagName === 'A') {
                        cursor.style.background = 'radial-gradient(circle, rgba(59, 130, 246, 1) 0%, rgba(139, 92, 246, 0.8) 100%)';
                    }
                });
                
                el.addEventListener('mouseleave', () => {
                    cursor.classList.remove('hover');
                    follower.classList.remove('hover');
                    cursor.style.background = 'radial-gradient(circle, rgba(59, 130, 246, 0.9) 0%, rgba(139, 92, 246, 0.7) 100%)';
                });
            });
            
            // Text input cursor effects
            const textInputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], textarea');
            textInputs.forEach(input => {
                input.addEventListener('mouseenter', () => {
                    cursor.classList.add('text');
                });
                
                input.addEventListener('mouseleave', () => {
                    cursor.classList.remove('text');
                });
                
                input.addEventListener('focus', () => {
                    cursor.classList.add('text');
                });
                
                input.addEventListener('blur', () => {
                    cursor.classList.remove('text');
                });
            });
            
            // Click effects
            document.addEventListener('mousedown', (e) => {
                isClicking = true;
                cursor.classList.add('click');
                
                // Create burst effect
                for (let i = 0; i < 6; i++) {
                    setTimeout(() => {
                        createCursorParticle(mouseX, mouseY);
                    }, i * 50);
                }
            });
            
            document.addEventListener('mouseup', () => {
                isClicking = false;
                cursor.classList.remove('click');
            });
            
            // Loading state for AJAX requests
            let loadingTimeout;
            function showLoadingCursor() {
                cursor.classList.add('loading');
                clearTimeout(loadingTimeout);
                loadingTimeout = setTimeout(() => {
                    cursor.classList.remove('loading');
                }, 3000);
            }
            
            // Monitor for AJAX requests
            const originalFetch = window.fetch;
            window.fetch = function(...args) {
                showLoadingCursor();
                return originalFetch.apply(this, args).finally(() => {
                    setTimeout(() => {
                        cursor.classList.remove('loading');
                    }, 500);
                });
            };
            
            // Hide cursor when leaving window
            document.addEventListener('mouseleave', () => {
                cursor.style.opacity = '0';
                follower.style.opacity = '0';
                cursorTrails.forEach(trail => {
                    trail.element.style.opacity = '0';
                });
            });
            
            document.addEventListener('mouseenter', () => {
                cursor.style.opacity = '1';
                follower.style.opacity = '1';
            });
            
            // Magnetic effect for important buttons
            const magneticElements = document.querySelectorAll('.btn-primary, .btn-secondary');
            magneticElements.forEach(el => {
                el.addEventListener('mousemove', (e) => {
                    const rect = el.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;
                    
                    const distance = Math.sqrt(x * x + y * y);
                    const maxDistance = 100;
                    
                    if (distance < maxDistance) {
                        const strength = (maxDistance - distance) / maxDistance;
                        const moveX = x * strength * 0.3;
                        const moveY = y * strength * 0.3;
                        
                        el.style.transform = `translate(${moveX}px, ${moveY}px)`;
                    }
                });
                
                el.addEventListener('mouseleave', () => {
                    el.style.transform = 'translate(0, 0)';
                });
            });
            
            // Cursor ripple effect on click
            document.addEventListener('click', (e) => {
                const ripple = document.createElement('div');
                ripple.style.position = 'fixed';
                ripple.style.left = e.clientX + 'px';
                ripple.style.top = e.clientY + 'px';
                ripple.style.width = '0px';
                ripple.style.height = '0px';
                ripple.style.borderRadius = '50%';
                ripple.style.background = 'rgba(59, 130, 246, 0.3)';
                ripple.style.transform = 'translate(-50%, -50%)';
                ripple.style.pointerEvents = 'none';
                ripple.style.zIndex = '9995';
                ripple.style.transition = 'all 0.6s ease-out';
                
                document.body.appendChild(ripple);
                
                // Trigger animation
                setTimeout(() => {
                    ripple.style.width = '100px';
                    ripple.style.height = '100px';
                    ripple.style.opacity = '0';
                }, 10);
                
                // Remove element
                setTimeout(() => {
                    if (ripple.parentNode) {
                        ripple.parentNode.removeChild(ripple);
                    }
                }, 600);
            });
        });
        
        // Floating particles animation
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
                particlesContainer.appendChild(particle);
            }
        }
        
        // Matrix rain effect
        function createMatrixRain() {
            const matrixContainer = document.getElementById('matrix-rain');
            const chars = '01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³';
            const columns = Math.floor(window.innerWidth / 20);
            
            for (let i = 0; i < columns; i++) {
                const column = document.createElement('div');
                column.style.position = 'absolute';
                column.style.left = i * 20 + 'px';
                column.style.top = '0';
                column.style.width = '20px';
                column.style.height = '100%';
                
                setInterval(() => {
                    if (Math.random() > 0.98) {
                        const char = document.createElement('div');
                        char.className = 'matrix-char';
                        char.textContent = chars[Math.floor(Math.random() * chars.length)];
                        char.style.left = '0';
                        char.style.top = '0';
                        column.appendChild(char);
                        
                        setTimeout(() => {
                            if (char.parentNode) {
                                char.parentNode.removeChild(char);
                            }
                        }, 3000);
                    }
                }, 100);
                
                matrixContainer.appendChild(column);
            }
        }
        
        // Ripple effect for buttons
        function addRippleEffect() {
            const buttons = document.querySelectorAll('.ripple');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple-effect');
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
        }
        
        // Text reveal animation
        function initTextReveal() {
            const textElements = document.querySelectorAll('.text-reveal');
            textElements.forEach(element => {
                const text = element.textContent;
                element.innerHTML = '';
                
                text.split('').forEach((char, index) => {
                    const span = document.createElement('span');
                    span.textContent = char === ' ' ? '\u00A0' : char;
                    span.style.animationDelay = (index * 0.05) + 's';
                    element.appendChild(span);
                });
            });
        }
        
        // Smooth scroll for anchor links
        function initSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        }
        
        // Initialize all animations when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            createParticles();
            createMatrixRain();
            addRippleEffect();
            initTextReveal();
            initSmoothScroll();
            
            // Add fade-in animation to page elements
            const elements = document.querySelectorAll('.card, .btn-primary, .btn-secondary');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
        
        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fade-in');
                }
            });
        }, observerOptions);
        
        // Observe elements for scroll animations
        document.addEventListener('DOMContentLoaded', () => {
            const animatedElements = document.querySelectorAll('.card, .message-bubble, .notification');
            animatedElements.forEach(el => observer.observe(el));
        });
        
        // Performance optimization: Reduce animations on low-end devices
        if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
            document.documentElement.style.setProperty('--animation-duration', '0.1s');
        }
        
        // Keyboard navigation enhancement
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-navigation');
            }
        });
        
        document.addEventListener('mousedown', () => {
            document.body.classList.remove('keyboard-navigation');
        });
    </script>
    
    <!-- Chat button removed as requested -->

    <!-- Chat buttons removed as requested -->
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
            </svg>
        </a>
    </div>

    {% block scripts %}{% endblock %}
</body>
</html>